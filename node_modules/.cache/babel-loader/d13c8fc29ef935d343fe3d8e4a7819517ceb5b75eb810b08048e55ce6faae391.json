{"ast":null,"code":"var common = require('./common');\nvar os = require('os');\nvar fs = require('fs');\ncommon.register('tempdir', _tempDir, {\n  allowGlobbing: false,\n  wrapOutput: false\n});\n\n// Returns false if 'dir' is not a writeable directory, 'dir' otherwise\nfunction writeableDir(dir) {\n  if (!dir || !fs.existsSync(dir)) return false;\n  if (!common.statFollowLinks(dir).isDirectory()) return false;\n  var testFile = dir + '/' + common.randomFileName();\n  try {\n    fs.writeFileSync(testFile, ' ');\n    common.unlinkSync(testFile);\n    return dir;\n  } catch (e) {\n    /* istanbul ignore next */\n    return false;\n  }\n}\n\n// Variable to cache the tempdir value for successive lookups.\nvar cachedTempDir;\n\n//@\n//@ ### tempdir()\n//@\n//@ Examples:\n//@\n//@ ```javascript\n//@ var tmp = tempdir(); // \"/tmp\" for most *nix platforms\n//@ ```\n//@\n//@ Searches and returns string containing a writeable, platform-dependent temporary directory.\n//@ Follows Python's [tempfile algorithm](http://docs.python.org/library/tempfile.html#tempfile.tempdir).\nfunction _tempDir() {\n  if (cachedTempDir) return cachedTempDir;\n  cachedTempDir = writeableDir(os.tmpdir()) || writeableDir(process.env.TMPDIR) || writeableDir(process.env.TEMP) || writeableDir(process.env.TMP) || writeableDir(process.env.Wimp$ScrapDir) ||\n  // RiscOS\n  writeableDir('C:\\\\TEMP') ||\n  // Windows\n  writeableDir('C:\\\\TMP') ||\n  // Windows\n  writeableDir('\\\\TEMP') ||\n  // Windows\n  writeableDir('\\\\TMP') ||\n  // Windows\n  writeableDir('/tmp') || writeableDir('/var/tmp') || writeableDir('/usr/tmp') || writeableDir('.'); // last resort\n\n  return cachedTempDir;\n}\n\n// Indicates if the tempdir value is currently cached. This is exposed for tests\n// only. The return value should only be tested for truthiness.\nfunction isCached() {\n  return cachedTempDir;\n}\n\n// Clears the cached tempDir value, if one is cached. This is exposed for tests\n// only.\nfunction clearCache() {\n  cachedTempDir = undefined;\n}\nmodule.exports.tempDir = _tempDir;\nmodule.exports.isCached = isCached;\nmodule.exports.clearCache = clearCache;","map":{"version":3,"names":["common","require","os","fs","register","_tempDir","allowGlobbing","wrapOutput","writeableDir","dir","existsSync","statFollowLinks","isDirectory","testFile","randomFileName","writeFileSync","unlinkSync","e","cachedTempDir","tmpdir","process","env","TMPDIR","TEMP","TMP","Wimp$ScrapDir","isCached","clearCache","undefined","module","exports","tempDir"],"sources":["/home/lenovo/node_modules/shelljs/src/tempdir.js"],"sourcesContent":["var common = require('./common');\nvar os = require('os');\nvar fs = require('fs');\n\ncommon.register('tempdir', _tempDir, {\n  allowGlobbing: false,\n  wrapOutput: false,\n});\n\n// Returns false if 'dir' is not a writeable directory, 'dir' otherwise\nfunction writeableDir(dir) {\n  if (!dir || !fs.existsSync(dir)) return false;\n\n  if (!common.statFollowLinks(dir).isDirectory()) return false;\n\n  var testFile = dir + '/' + common.randomFileName();\n  try {\n    fs.writeFileSync(testFile, ' ');\n    common.unlinkSync(testFile);\n    return dir;\n  } catch (e) {\n    /* istanbul ignore next */\n    return false;\n  }\n}\n\n// Variable to cache the tempdir value for successive lookups.\nvar cachedTempDir;\n\n//@\n//@ ### tempdir()\n//@\n//@ Examples:\n//@\n//@ ```javascript\n//@ var tmp = tempdir(); // \"/tmp\" for most *nix platforms\n//@ ```\n//@\n//@ Searches and returns string containing a writeable, platform-dependent temporary directory.\n//@ Follows Python's [tempfile algorithm](http://docs.python.org/library/tempfile.html#tempfile.tempdir).\nfunction _tempDir() {\n  if (cachedTempDir) return cachedTempDir;\n\n  cachedTempDir = writeableDir(os.tmpdir()) ||\n                  writeableDir(process.env.TMPDIR) ||\n                  writeableDir(process.env.TEMP) ||\n                  writeableDir(process.env.TMP) ||\n                  writeableDir(process.env.Wimp$ScrapDir) || // RiscOS\n                  writeableDir('C:\\\\TEMP') || // Windows\n                  writeableDir('C:\\\\TMP') || // Windows\n                  writeableDir('\\\\TEMP') || // Windows\n                  writeableDir('\\\\TMP') || // Windows\n                  writeableDir('/tmp') ||\n                  writeableDir('/var/tmp') ||\n                  writeableDir('/usr/tmp') ||\n                  writeableDir('.'); // last resort\n\n  return cachedTempDir;\n}\n\n// Indicates if the tempdir value is currently cached. This is exposed for tests\n// only. The return value should only be tested for truthiness.\nfunction isCached() {\n  return cachedTempDir;\n}\n\n// Clears the cached tempDir value, if one is cached. This is exposed for tests\n// only.\nfunction clearCache() {\n  cachedTempDir = undefined;\n}\n\nmodule.exports.tempDir = _tempDir;\nmodule.exports.isCached = isCached;\nmodule.exports.clearCache = clearCache;\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,UAAU,CAAC;AAChC,IAAIC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AACtB,IAAIE,EAAE,GAAGF,OAAO,CAAC,IAAI,CAAC;AAEtBD,MAAM,CAACI,QAAQ,CAAC,SAAS,EAAEC,QAAQ,EAAE;EACnCC,aAAa,EAAE,KAAK;EACpBC,UAAU,EAAE;AACd,CAAC,CAAC;;AAEF;AACA,SAASC,YAAYA,CAACC,GAAG,EAAE;EACzB,IAAI,CAACA,GAAG,IAAI,CAACN,EAAE,CAACO,UAAU,CAACD,GAAG,CAAC,EAAE,OAAO,KAAK;EAE7C,IAAI,CAACT,MAAM,CAACW,eAAe,CAACF,GAAG,CAAC,CAACG,WAAW,CAAC,CAAC,EAAE,OAAO,KAAK;EAE5D,IAAIC,QAAQ,GAAGJ,GAAG,GAAG,GAAG,GAAGT,MAAM,CAACc,cAAc,CAAC,CAAC;EAClD,IAAI;IACFX,EAAE,CAACY,aAAa,CAACF,QAAQ,EAAE,GAAG,CAAC;IAC/Bb,MAAM,CAACgB,UAAU,CAACH,QAAQ,CAAC;IAC3B,OAAOJ,GAAG;EACZ,CAAC,CAAC,OAAOQ,CAAC,EAAE;IACV;IACA,OAAO,KAAK;EACd;AACF;;AAEA;AACA,IAAIC,aAAa;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASb,QAAQA,CAAA,EAAG;EAClB,IAAIa,aAAa,EAAE,OAAOA,aAAa;EAEvCA,aAAa,GAAGV,YAAY,CAACN,EAAE,CAACiB,MAAM,CAAC,CAAC,CAAC,IACzBX,YAAY,CAACY,OAAO,CAACC,GAAG,CAACC,MAAM,CAAC,IAChCd,YAAY,CAACY,OAAO,CAACC,GAAG,CAACE,IAAI,CAAC,IAC9Bf,YAAY,CAACY,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC,IAC7BhB,YAAY,CAACY,OAAO,CAACC,GAAG,CAACI,aAAa,CAAC;EAAI;EAC3CjB,YAAY,CAAC,UAAU,CAAC;EAAI;EAC5BA,YAAY,CAAC,SAAS,CAAC;EAAI;EAC3BA,YAAY,CAAC,QAAQ,CAAC;EAAI;EAC1BA,YAAY,CAAC,OAAO,CAAC;EAAI;EACzBA,YAAY,CAAC,MAAM,CAAC,IACpBA,YAAY,CAAC,UAAU,CAAC,IACxBA,YAAY,CAAC,UAAU,CAAC,IACxBA,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;;EAEnC,OAAOU,aAAa;AACtB;;AAEA;AACA;AACA,SAASQ,QAAQA,CAAA,EAAG;EAClB,OAAOR,aAAa;AACtB;;AAEA;AACA;AACA,SAASS,UAAUA,CAAA,EAAG;EACpBT,aAAa,GAAGU,SAAS;AAC3B;AAEAC,MAAM,CAACC,OAAO,CAACC,OAAO,GAAG1B,QAAQ;AACjCwB,MAAM,CAACC,OAAO,CAACJ,QAAQ,GAAGA,QAAQ;AAClCG,MAAM,CAACC,OAAO,CAACH,UAAU,GAAGA,UAAU"},"metadata":{},"sourceType":"script","externalDependencies":[]}